<div class="card">
  <div class="card-body" *ngIf="!is_creating_conversation">
    <button
      type="button"
      (click)="toggleCreatingConversation()"
      class="btn btn-member"
    >
      Nueva conversación
    </button>
  </div>
  <div *ngIf="is_creating_conversation" class="card-body">
    <h3 class="">Nueva conversación</h3>
    <div class="form-group row mt-3 mb-0">
      <div class="col-md-4">
        <p class="font-light">Nombre de la conversación</p>
      </div>
      <div class="col-md-8">
        <input
          type="text"
          class="form-control"
          id="new_conversation_name"
          placeholder="Nombre de la conversación"
          [(ngModel)]="new_conversation_name"
          pInputText
          required
          style="font-size: 15px"
        />
      </div>
    </div>
    <div class="form-group row">
      <div class="col-md-4">
        <p class="font-light">Imagen (opcional)</p>
      </div>
      <div class="col-md-8">
        <div class="custom-file">
          <input
            type="file"
            class="custom-file-input"
            id="validatedCustomFile"
            required
          />
          <div class="invalid-feedback">
            Example invalid custom file feedback
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-6 p-0">
      <p class="font-medium">Añadir miembros a la conversación:</p>
    </div>
    <div class="row">
      <ul class="mt-2 d-flex justify-content-start gap-2">
        <li
          class="btn btn-member"
          *ngFor="let related_user of related_users"
          (click)="addMemberToNewConversation(related_user)"
        >
          {{ related_user.member_name }}
        </li>
      </ul>
    </div>
    <div class="col-md-6 mt-3 p-0">
      <p class="font-medium">
        Miembros añadidos (para remover un miembro haz clic sobre él):
      </p>
    </div>
    <div class="row my-2">
      <ul class="d-flex justify-content-start gap-2">
        <li
          class="btn btn-member-selected"
          *ngFor="let conversation_member of new_conversation_members"
          (click)="removeMemberFromNewConversation(conversation_member)"
        >
          {{ conversation_member.member_name }}
        </li>
      </ul>
    </div>
    <div class="dropdown-divider"></div>
    <div>
      <div class="card-body p-0 mt-3 d-flex gap-2">
        <button
          type="button"
          class="btn btn-member"
          (click)="createConversation()"
        >
          Crear conversación
        </button>
        <button
          type="button"
          (click)="toggleCreatingConversation()"
          class="btn btn-member-selected"
        >
          Cancelar
        </button>
      </div>
    </div>
  </div>
</div>
